# Comparing `tmp/odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1-py3-none-any.whl.zip` & `tmp/odoo14_addon_purchase_sale_inter_company-14.0.2.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,40 +1,40 @@
-Zip file size: 58282 bytes, number of entries: 38
--rw-r--r--  2.0 unx     5497 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/README.rst
--rw-r--r--  2.0 unx       42 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/__init__.py
--rw-r--r--  2.0 unx      888 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/__manifest__.py
--rw-r--r--  2.0 unx      577 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/demo/res_partner_demo.xml
--rw-r--r--  2.0 unx    13301 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/i18n/de.po
--rw-r--r--  2.0 unx    16043 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/i18n/es.po
--rw-r--r--  2.0 unx    15323 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/i18n/fr.po
--rw-r--r--  2.0 unx    15342 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/i18n/fr_FR.po
--rw-r--r--  2.0 unx    15733 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/i18n/it.po
--rw-r--r--  2.0 unx    12960 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/i18n/purchase_sale_inter_company.pot
--rw-r--r--  2.0 unx    15242 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/i18n/sl.po
--rw-r--r--  2.0 unx    13197 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/i18n/zh_CN.po
--rw-r--r--  2.0 unx      185 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/models/__init__.py
--rw-r--r--  2.0 unx     1270 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/models/account_move.py
--rw-r--r--  2.0 unx    12767 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/models/purchase_order.py
--rw-r--r--  2.0 unx     1401 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/models/res_company.py
--rw-r--r--  2.0 unx     1919 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/models/res_config.py
--rw-r--r--  2.0 unx     7910 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/models/sale_order.py
--rw-r--r--  2.0 unx      475 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/models/stock_move.py
--rw-r--r--  2.0 unx     6814 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/models/stock_picking.py
--rw-r--r--  2.0 unx      885 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/readme/CONFIGURATION.rst
--rw-r--r--  2.0 unx      397 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/readme/CONTEXT.rst
--rw-r--r--  2.0 unx      488 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      464 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      354 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      405 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/readme/USAGE.rst
--rw-r--r--  2.0 unx     3735 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/static/description/icon.png
--rw-r--r--  2.0 unx    16174 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/static/description/index.html
--rw-r--r--  2.0 unx       47 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/tests/__init__.py
--rw-r--r--  2.0 unx    22807 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/tests/test_inter_company_purchase_sale.py
--rw-r--r--  2.0 unx     2276 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/views/res_config_view.xml
--rw-r--r--  2.0 unx       43 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/wizard/__init__.py
--rw-r--r--  2.0 unx     1499 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/wizard/stock_backorder_confirmation.py
--rw-r--r--  2.0 unx     1162 b- defN 24-Mar-02 05:28 odoo/addons/purchase_sale_inter_company/wizard/stock_backorder_confirmation_views.xml
--rw-r--r--  2.0 unx     6127 b- defN 24-Mar-02 05:29 odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Mar-02 05:29 odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-Mar-02 05:29 odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     4464 b- defN 24-Mar-02 05:29 odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/RECORD
-38 files, 218310 bytes uncompressed, 50648 bytes compressed:  76.8%
+Zip file size: 58709 bytes, number of entries: 38
+-rw-r--r--  2.0 unx     5540 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/README.rst
+-rw-r--r--  2.0 unx       42 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/__init__.py
+-rw-r--r--  2.0 unx      888 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/__manifest__.py
+-rw-r--r--  2.0 unx      577 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/demo/res_partner_demo.xml
+-rw-r--r--  2.0 unx    13301 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/i18n/de.po
+-rw-r--r--  2.0 unx    16043 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/i18n/es.po
+-rw-r--r--  2.0 unx    15323 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/i18n/fr.po
+-rw-r--r--  2.0 unx    15342 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/i18n/fr_FR.po
+-rw-r--r--  2.0 unx    15733 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/i18n/it.po
+-rw-r--r--  2.0 unx    13746 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/i18n/purchase_sale_inter_company.pot
+-rw-r--r--  2.0 unx    15242 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/i18n/sl.po
+-rw-r--r--  2.0 unx    13197 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/i18n/zh_CN.po
+-rw-r--r--  2.0 unx      185 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/models/__init__.py
+-rw-r--r--  2.0 unx     1270 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/models/account_move.py
+-rw-r--r--  2.0 unx    12767 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/models/purchase_order.py
+-rw-r--r--  2.0 unx     1544 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/models/res_company.py
+-rw-r--r--  2.0 unx     2071 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/models/res_config.py
+-rw-r--r--  2.0 unx     7910 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/models/sale_order.py
+-rw-r--r--  2.0 unx      475 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/models/stock_move.py
+-rw-r--r--  2.0 unx     7144 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/models/stock_picking.py
+-rw-r--r--  2.0 unx     1054 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/readme/CONFIGURATION.rst
+-rw-r--r--  2.0 unx      397 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/readme/CONTEXT.rst
+-rw-r--r--  2.0 unx      531 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      464 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      354 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      405 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/readme/USAGE.rst
+-rw-r--r--  2.0 unx     3735 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/static/description/icon.png
+-rw-r--r--  2.0 unx    16307 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/static/description/index.html
+-rw-r--r--  2.0 unx       47 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/tests/__init__.py
+-rw-r--r--  2.0 unx    23685 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/tests/test_inter_company_purchase_sale.py
+-rw-r--r--  2.0 unx     2690 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/views/res_config_view.xml
+-rw-r--r--  2.0 unx       43 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/wizard/__init__.py
+-rw-r--r--  2.0 unx     1499 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/wizard/stock_backorder_confirmation.py
+-rw-r--r--  2.0 unx     1162 b- defN 24-Apr-19 14:43 odoo/addons/purchase_sale_inter_company/wizard/stock_backorder_confirmation_views.xml
+-rw-r--r--  2.0 unx     6165 b- defN 24-Apr-19 14:43 odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-19 14:43 odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-Apr-19 14:43 odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     4445 b- defN 24-Apr-19 14:43 odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/RECORD
+38 files, 221420 bytes uncompressed, 51115 bytes compressed:  76.9%
```

## zipnote {}

```diff
@@ -96,20 +96,20 @@
 
 Filename: odoo/addons/purchase_sale_inter_company/wizard/stock_backorder_confirmation.py
 Comment: 
 
 Filename: odoo/addons/purchase_sale_inter_company/wizard/stock_backorder_confirmation_views.xml
 Comment: 
 
-Filename: odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/METADATA
+Filename: odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/WHEEL
+Filename: odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/top_level.txt
+Filename: odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/RECORD
+Filename: odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/purchase_sale_inter_company/README.rst

```diff
@@ -3,15 +3,15 @@
 ===============================================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:115bf6e967ae2b758d1e6840223c5a9e2eca19dd20c2f5eadd7bd3d0fbca42a5
+   !! source digest: sha256:7dbc1983ab52ad1fbfbf9a322d30b6414fb470f47e1591da1d0a89751b17163f
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
@@ -107,14 +107,15 @@
 * `PyTech SRL <info@pytech.it>`_:
 
   * Alessandro Uffreduzzi <alessandro.uffreduzzi@pytech.it>
 
 * Ooops404 <info@ooops404.com>
 
   * Francesco Foresti <francesco.foresti@ooops404.com>
+  * Eduard Brahas <eduardbrhas@outlook.it>
 
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
```

## odoo/addons/purchase_sale_inter_company/__manifest__.py

```diff
@@ -2,15 +2,15 @@
 # Copyright 2016-2019 Chafique DELLI @ Akretion
 # Copyright 2018-2019 Tecnativa - Carlos Dauden
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "Inter Company Module for Purchase to Sale Order",
     "summary": "Intercompany PO/SO rules",
-    "version": "14.0.2.1.1",
+    "version": "14.0.2.2.0",
     "category": "Purchase Management",
     "website": "https://github.com/OCA/multi-company",
     "author": "Odoo SA, Akretion, Tecnativa, Odoo Community Association (OCA)",
     "maintainers": ["aleuffre", "renda-dev"],
     "license": "AGPL-3",
     "installable": True,
     "depends": [
```

## odoo/addons/purchase_sale_inter_company/i18n/purchase_sale_inter_company.pot

```diff
@@ -15,14 +15,25 @@
 
 #. module: purchase_sale_inter_company
 #: model:ir.model,name:purchase_sale_inter_company.model_stock_backorder_confirmation
 msgid "Backorder Confirmation"
 msgstr ""
 
 #. module: purchase_sale_inter_company
+#: model_terms:ir.ui.view,arch_db:purchase_sale_inter_company.res_config_settings_view_form
+msgid "Block PO manual picking validation"
+msgstr ""
+
+#. module: purchase_sale_inter_company
+#: model:ir.model.fields,field_description:purchase_sale_inter_company.field_res_company__block_po_manual_picking_validation
+#: model:ir.model.fields,field_description:purchase_sale_inter_company.field_res_config_settings__block_po_manual_picking_validation
+msgid "Block manual validation of picking in the destination company"
+msgstr ""
+
+#. module: purchase_sale_inter_company
 #: model:ir.model,name:purchase_sale_inter_company.model_res_company
 msgid "Companies"
 msgstr ""
 
 #. module: purchase_sale_inter_company
 #: model:ir.model,name:purchase_sale_inter_company.model_res_config_settings
 msgid "Config Settings"
@@ -137,14 +148,21 @@
 msgid "Last Modified on"
 msgstr ""
 
 #. module: purchase_sale_inter_company
 #: code:addons/purchase_sale_inter_company/models/stock_picking.py:0
 #, python-format
 msgid ""
+"Manual validation of the picking is not allowed in the destination company."
+msgstr ""
+
+#. module: purchase_sale_inter_company
+#: code:addons/purchase_sale_inter_company/models/stock_picking.py:0
+#, python-format
+msgid ""
 "Mismatch between move lines with the corresponding PO %s for assigning "
 "quantities and lots from %s for product %s"
 msgstr ""
 
 #. module: purchase_sale_inter_company
 #: code:addons/purchase_sale_inter_company/models/stock_picking.py:0
 #, python-format
```

## odoo/addons/purchase_sale_inter_company/models/res_company.py

```diff
@@ -32,7 +32,10 @@
         string="Intercompany Sale User",
     )
     sync_picking = fields.Boolean(
         string="Sync the receipt with the delivery",
         help="Sync the receipt from the destination company with the "
         "delivery from the source company",
     )
+    block_po_manual_picking_validation = fields.Boolean(
+        string="Block manual validation of picking in the destination company",
+    )
```

## odoo/addons/purchase_sale_inter_company/models/res_config.py

```diff
@@ -43,7 +43,11 @@
     sync_picking = fields.Boolean(
         related="company_id.sync_picking",
         string="Sync the receipt from the destination company with the delivery",
         help="Sync the receipt from the destination company with "
         "the delivery from the source company",
         readonly=False,
     )
+    block_po_manual_picking_validation = fields.Boolean(
+        related="company_id.block_po_manual_picking_validation",
+        readonly=False,
+    )
```

## odoo/addons/purchase_sale_inter_company/models/stock_picking.py

```diff
@@ -46,27 +46,20 @@
                 move_lines = move.move_line_ids
                 po_move_lines = (
                     move.sale_line_id.auto_purchase_line_id.move_ids.filtered(
                         lambda x, ic_pick=pick.intercompany_picking_id: x.picking_id
                         == ic_pick
                     ).mapped("move_line_ids")
                 )
-                if not len(move_lines) == len(po_move_lines):
+                if len(move_lines) != len(po_move_lines):
                     note = _(
                         "Mismatch between move lines with the "
                         "corresponding PO %s for assigning "
                         "quantities and lots from %s for product %s"
                     ) % (purchase.name, pick.name, move.product_id.name)
-                    # Configurable parameter so we don't lock the picking validation
-                    if (
-                        not self.env["ir.config_parameter"]
-                        .sudo()
-                        .get_param("purchase_sale_inter_company.soft_picking_mismatch")
-                    ):
-                        raise UserError(note)
                     self.activity_schedule(
                         "mail.mail_activity_data_warning",
                         fields.Date.today(),
                         note=note,
                         # Try to notify someone relevant
                         user_id=(
                             pick.sale_id.user_id.id
@@ -109,14 +102,27 @@
                 and record.picking_type_code == "outgoing"
             ):
                 if record.intercompany_picking_id:
                     record._sync_receipt_with_delivery(
                         dest_company,
                         record.sale_id,
                     )
+        # if the flag is set, block the validation of the picking in the destination company
+        if self.env.company.block_po_manual_picking_validation:
+            for record in self:
+                dest_company = record.partner_id.commercial_partner_id.ref_company_ids
+                if (
+                    dest_company and record.picking_type_code == "incoming"
+                ) and record.state in ["done", "waiting", "assigned"]:
+                    raise UserError(
+                        _(
+                            "Manual validation of the picking is not allowed"
+                            " in the destination company."
+                        )
+                    )
         return res
 
     def _sync_receipt_with_delivery(self, dest_company, sale_order):
         self.ensure_one()
         intercompany_user = dest_company.intercompany_sale_user_id
         purchase_order = sale_order.auto_purchase_order_id.sudo()
         if not (purchase_order and purchase_order.picking_ids):
```

## odoo/addons/purchase_sale_inter_company/readme/CONFIGURATION.rst

```diff
@@ -6,7 +6,9 @@
 #. Select the "Warehouse for Sale Orders": it is the warehouse that will be used in the Sale Orders generated from POs coming from other companies..
 
 #. Select the "Intercompany Sale User": is it the user that will be used as creator of the Sale Orders generated from POs coming from other companies.
 
 #. If you check the option "Sale Orders Auto Validation" in the configuration of company B, when you validate a Purchase Order in company A with company B as supplier, the Sale Order will be automatically validated in company B with company A as customer.
 
 #. If you check the option "Sync picking" (for both companies), validating a picking generated by an inter-company purchase/sale will validate the respective picking for the other company.
+
+#. If you check the option "Block manual validation of picking in the destination company" is not possible to validate manually the picking in the destination company.
```

## odoo/addons/purchase_sale_inter_company/readme/CONTRIBUTORS.rst

```diff
@@ -10,7 +10,8 @@
 * `PyTech SRL <info@pytech.it>`_:
 
   * Alessandro Uffreduzzi <alessandro.uffreduzzi@pytech.it>
 
 * Ooops404 <info@ooops404.com>
 
   * Francesco Foresti <francesco.foresti@ooops404.com>
+  * Eduard Brahas <eduardbrhas@outlook.it>
```

## odoo/addons/purchase_sale_inter_company/static/description/index.html

```diff
@@ -362,15 +362,15 @@
 <div class="document" id="inter-company-module-for-purchase-to-sale-order">
 <h1 class="title">Inter Company Module for Purchase to Sale Order</h1>
 
 <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 !! This file is generated by oca-gen-addon-readme !!
 !! changes will be overwritten.                   !!
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-!! source digest: sha256:115bf6e967ae2b758d1e6840223c5a9e2eca19dd20c2f5eadd7bd3d0fbca42a5
+!! source digest: sha256:7dbc1983ab52ad1fbfbf9a322d30b6414fb470f47e1591da1d0a89751b17163f
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
 <p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/multi-company/tree/14.0/purchase_sale_inter_company"><img alt="OCA/multi-company" src="https://img.shields.io/badge/github-OCA%2Fmulti--company-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/multi-company-14-0/multi-company-14-0-purchase_sale_inter_company"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/multi-company&amp;target_branch=14.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
 <p>This module is useful if there are multiple companies in the same Odoo database and those companies sell goods or services among themselves.</p>
 <p>It allows to create a sale order in company A from a purchase order in company B, and keep delivery/receipt pickings synced, including backorders.</p>
 <p>When Company A sends a product tracked by lot or serial number, a new lot/serial number with the same name is created in Company B to match it, if one doesnâ€™t already exist.</p>
 <p><strong>Table of contents</strong></p>
 <div class="contents local topic" id="contents">
@@ -444,14 +444,15 @@
 <li>Mourad EL HADJ MIMOUNE &lt;<a class="reference external" href="mailto:mourad.elhadj.mimoune&#64;akretion.com">mourad.elhadj.mimoune&#64;akretion.com</a>&gt;</li>
 <li><a class="reference external" href="mailto:info&#64;pytech.it">PyTech SRL</a>:<ul>
 <li>Alessandro Uffreduzzi &lt;<a class="reference external" href="mailto:alessandro.uffreduzzi&#64;pytech.it">alessandro.uffreduzzi&#64;pytech.it</a>&gt;</li>
 </ul>
 </li>
 <li>Ooops404 &lt;<a class="reference external" href="mailto:info&#64;ooops404.com">info&#64;ooops404.com</a>&gt;<ul>
 <li>Francesco Foresti &lt;<a class="reference external" href="mailto:francesco.foresti&#64;ooops404.com">francesco.foresti&#64;ooops404.com</a>&gt;</li>
+<li>Eduard Brahas &lt;<a class="reference external" href="mailto:eduardbrhas&#64;outlook.it">eduardbrhas&#64;outlook.it</a>&gt;</li>
 </ul>
 </li>
 </ul>
 </div>
 <div class="section" id="maintainers">
 <h2><a class="toc-backref" href="#toc-entry-8">Maintainers</a></h2>
 <p>This module is maintained by the OCA.</p>
```

### html2text {}

```diff
@@ -58,14 +58,15 @@
           o Carlos Dauden
           o Jairo Llopis
     * Mourad EL HADJ MIMOUNE <_m_o_u_r_a_d_._e_l_h_a_d_j_._m_i_m_o_u_n_e_@_a_k_r_e_t_i_o_n_._c_o_m>
     * _P_y_T_e_c_h_ _S_R_L:
           o Alessandro Uffreduzzi <_a_l_e_s_s_a_n_d_r_o_._u_f_f_r_e_d_u_z_z_i_@_p_y_t_e_c_h_._i_t>
     * Ooops404 <_i_n_f_o_@_o_o_o_p_s_4_0_4_._c_o_m>
           o Francesco Foresti <_f_r_a_n_c_e_s_c_o_._f_o_r_e_s_t_i_@_o_o_o_p_s_4_0_4_._c_o_m>
+          o Eduard Brahas <_e_d_u_a_r_d_b_r_h_a_s_@_o_u_t_l_o_o_k_._i_t>
 ********** _MM_aa_ii_nn_tt_aa_ii_nn_ee_rr_ss **********
 This module is maintained by the OCA.
 _[_O_d_o_o_ _C_o_m_m_u_n_i_t_y_ _A_s_s_o_c_i_a_t_i_o_n_]
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 Current _m_a_i_n_t_a_i_n_e_r_s:
```

## odoo/addons/purchase_sale_inter_company/tests/test_inter_company_purchase_sale.py

```diff
@@ -593,7 +593,27 @@
         # A warning activity is scheduled in the picking
         self.assertRegex(
             so_picking_id.activity_ids.note,
             re.compile(
                 "3.0 Units of Consumable Product 2.+instead of 8.0 Units", re.DOTALL
             ),
         )
+
+    def test_block_manual_validation(self):
+        """
+        Test that the manual validation of the picking is blocked
+        when the flag is set in the destination company
+        """
+        self.company_a.sync_picking = True
+        self.company_b.sync_picking = True
+        self.company_a.block_po_manual_picking_validation = True
+        self.company_b.block_po_manual_picking_validation = True
+        purchase = self._create_purchase_order(
+            self.partner_company_b, self.consumable_product
+        )
+        purchase.button_confirm()
+        po_picking_id = purchase.picking_ids
+        # The picking should be in waiting state
+        self.assertEqual(po_picking_id.state, "waiting")
+        # The manual validation should be blocked
+        with self.assertRaises(UserError):
+            po_picking_id.with_user(self.user_company_a).button_validate()
```

## odoo/addons/purchase_sale_inter_company/views/res_config_view.xml

### odoo/addons/purchase_sale_inter_company/views/res_config_view.xml

```diff
@@ -15,14 +15,17 @@
           <field name="warehouse_id" attrs="{'required': [('so_from_po', '=', True)]}" class="oe_inline" domain="[('company_id', '=', company_id)]"/>
           <label for="intercompany_sale_user_id" class="o_light_label"/>
           <field name="intercompany_sale_user_id" attrs="{'required': [('so_from_po', '=', True)]}" class="oe_inline"/>
           <br/>
           <field name="sync_picking" class="oe_inline"/>
           <label string="Sync picking" class="o_light_label" for="sync_picking"/>
           <br/>
+          <field name="block_po_manual_picking_validation" class="oe_inline"/>
+          <label string="Block PO manual picking validation" class="o_light_label" for="block_po_manual_picking_validation"/>
+          <br/>
           <field name="sale_auto_validation" class="oe_inline"/>
           <label for="sale_auto_validation" class="oe_inline o_light_label"/>
         </div>
       </xpath>
     </field>
   </record>
 </odoo>
```

## Comparing `odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/METADATA` & `odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-purchase-sale-inter-company
-Version: 14.0.2.1.2.dev1
+Version: 14.0.2.2.0
 Summary: Intercompany PO/SO rules
 Home-page: https://github.com/OCA/multi-company
 Author: Odoo SA, Akretion, Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
@@ -20,15 +20,15 @@
 ===============================================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:115bf6e967ae2b758d1e6840223c5a9e2eca19dd20c2f5eadd7bd3d0fbca42a5
+   !! source digest: sha256:7dbc1983ab52ad1fbfbf9a322d30b6414fb470f47e1591da1d0a89751b17163f
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
@@ -124,14 +124,15 @@
 * `PyTech SRL <info@pytech.it>`_:
 
   * Alessandro Uffreduzzi <alessandro.uffreduzzi@pytech.it>
 
 * Ooops404 <info@ooops404.com>
 
   * Francesco Foresti <francesco.foresti@ooops404.com>
+  * Eduard Brahas <eduardbrhas@outlook.it>
 
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
```

## Comparing `odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/RECORD` & `odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/RECORD`

 * *Files 17% similar despite different names*

```diff
@@ -1,38 +1,38 @@
-odoo/addons/purchase_sale_inter_company/README.rst,sha256=_HyawB_GKhxpnXwOrMdO8OQiZ5QtnNo5FCjPc4FPlQM,5497
+odoo/addons/purchase_sale_inter_company/README.rst,sha256=1RsH2qIMPG9j9_lkGG4WAGy4T9LVMg5neplSi-vGHOY,5540
 odoo/addons/purchase_sale_inter_company/__init__.py,sha256=R3l5zcM1DHY7iqr3kt92069kmImpPafRbNSzv6p_hBE,42
-odoo/addons/purchase_sale_inter_company/__manifest__.py,sha256=vW2-SkmVC4zXmhSLj9-uCgb-avWICM82qB-X7ByzLBY,888
+odoo/addons/purchase_sale_inter_company/__manifest__.py,sha256=oGOWstaIWvWdw7KIDaxxHYHdGnhL8CIq-mqhmK59bRM,888
 odoo/addons/purchase_sale_inter_company/demo/res_partner_demo.xml,sha256=7nYMFbRtNqZJDAzDImb_PxW5ha2NY_81jl2nGXsB9Ts,577
 odoo/addons/purchase_sale_inter_company/i18n/de.po,sha256=lXesMUOSWBwrqy1AcfdsvUJWDEM-VHQdiaJkENOOBx8,13301
 odoo/addons/purchase_sale_inter_company/i18n/es.po,sha256=DHjeBLF91fQ06bTQq-jKtQkocY4SszRq22ZWvT_LzsE,16043
 odoo/addons/purchase_sale_inter_company/i18n/fr.po,sha256=7mUKI-OfGqfZdJc5Wcnf4k25c_oq-QfXko_LSAYks54,15323
 odoo/addons/purchase_sale_inter_company/i18n/fr_FR.po,sha256=taHKmw8ZxpKU8b57UFZdDjIh7xHla-qQOKkQPJp2y0g,15342
 odoo/addons/purchase_sale_inter_company/i18n/it.po,sha256=xn6CiiQ6OYF9hyZzdNmqC4DLS5zG8kfoSeDFbySzj4A,15733
-odoo/addons/purchase_sale_inter_company/i18n/purchase_sale_inter_company.pot,sha256=PQF5LSBGAM5J6nbsF07g8Qp25oFfKN8hGrSZ30ugw5A,12960
+odoo/addons/purchase_sale_inter_company/i18n/purchase_sale_inter_company.pot,sha256=bpQCBnR057UY0b36-8mApwzVJ8kRfCfoWLuOA-TRr2c,13746
 odoo/addons/purchase_sale_inter_company/i18n/sl.po,sha256=FIcDaB3fU_nF4yUnsBSd0rAEkaOxodkeh4bTeQ-SxGc,15242
 odoo/addons/purchase_sale_inter_company/i18n/zh_CN.po,sha256=BSlD1BICCfI4-o5i5AmUVbAwm0MmSkbd8seeIKsm2wg,13197
 odoo/addons/purchase_sale_inter_company/models/__init__.py,sha256=4KqCvlzLgQrHGfx4yHdDf7ha_bsvmdaU602-sMdAOM0,185
 odoo/addons/purchase_sale_inter_company/models/account_move.py,sha256=zSeltwxdAItAx2fQfm_e9NPXu0ndZ5LXwtIELG_8m3w,1270
 odoo/addons/purchase_sale_inter_company/models/purchase_order.py,sha256=8giQcEspGfQeL10CixV7-xq_xRp7Kumjh2D8-HUqlnI,12767
-odoo/addons/purchase_sale_inter_company/models/res_company.py,sha256=IZ93MKm4UjsDgpfZF9KipkH8zsNCGJ21NL1lJuv862A,1401
-odoo/addons/purchase_sale_inter_company/models/res_config.py,sha256=54R1ltwwHqu5jAbF9tW22Ozc1n47lW3OeGX4NEtGbRA,1919
+odoo/addons/purchase_sale_inter_company/models/res_company.py,sha256=n2UtE1zldY6FhAfV44AeDGuyoSWaknr65ADgCTNeNzM,1544
+odoo/addons/purchase_sale_inter_company/models/res_config.py,sha256=Xu19Imi-qvf5ddiPi_2_E3a7tNJcCshTVO9KwqrSHOI,2071
 odoo/addons/purchase_sale_inter_company/models/sale_order.py,sha256=jP-KitffrBNKjjFGUlCeWdeRvGid94VKDe1N7bSRWYw,7910
 odoo/addons/purchase_sale_inter_company/models/stock_move.py,sha256=xV_VDyiOX0tvRuTcGi71FSNRK13eyuU1hZ3Pgvb0E7c,475
-odoo/addons/purchase_sale_inter_company/models/stock_picking.py,sha256=UMWbdoFLQgXMzzfbTYUrHiYnR2E5Rl7ok5LoFkzL1YU,6814
-odoo/addons/purchase_sale_inter_company/readme/CONFIGURATION.rst,sha256=7e4vNBNv-fUWntx80Ir45OD7NDOe5-sZ1KyNygUzTS8,885
+odoo/addons/purchase_sale_inter_company/models/stock_picking.py,sha256=B2BAdHQZBG3uz8RvNL3H-WoG-C6t8KjHrR1rROuy3_k,7144
+odoo/addons/purchase_sale_inter_company/readme/CONFIGURATION.rst,sha256=mroB_O2ZfxkI1lR3TmUQSUvCU3TL0BxzvfI4vncUIek,1054
 odoo/addons/purchase_sale_inter_company/readme/CONTEXT.rst,sha256=6AhURYZovCfJ8N8XBRDDnDDWOOLUgBAk1V8fWFseEII,397
-odoo/addons/purchase_sale_inter_company/readme/CONTRIBUTORS.rst,sha256=IGVGeygNrjjJCvHMBzvPkwYGaBZgfsD9Wp178uVWZY4,488
+odoo/addons/purchase_sale_inter_company/readme/CONTRIBUTORS.rst,sha256=hfcnM-8SST7-lDPVhkQBC1CZt3EfKfexLSSohs2jPmc,531
 odoo/addons/purchase_sale_inter_company/readme/DESCRIPTION.rst,sha256=WNGIKs0pbQpcu4l8doIw6z1Huq_82TMuzPDTr4z-8gw,464
 odoo/addons/purchase_sale_inter_company/readme/ROADMAP.rst,sha256=sX2QI9joj69V8MTo98oYrCJwzIYmhWJxt4q2Fd2LiTI,354
 odoo/addons/purchase_sale_inter_company/readme/USAGE.rst,sha256=HRfO8bCKYvbWFJo5oETZyWEssquSAmKt3tD6AxCfKME,405
 odoo/addons/purchase_sale_inter_company/static/description/icon.png,sha256=MgREVMXGpykVJnCbPRgaHbKSgjcti0P4DISlF4WUf2A,3735
-odoo/addons/purchase_sale_inter_company/static/description/index.html,sha256=wQwesv5RpzgdLG98KsZYfCb_EJnAyHF3RlN2og_4uDg,16174
+odoo/addons/purchase_sale_inter_company/static/description/index.html,sha256=T3xpcnXH6pfdOI03UjFTi0Tzs8Z2jLjnmSbVYZKDOV0,16307
 odoo/addons/purchase_sale_inter_company/tests/__init__.py,sha256=2UsIPwxNzaEZJfgd5QWcSHheHiIXt3zBQzf5TVHPlzY,47
-odoo/addons/purchase_sale_inter_company/tests/test_inter_company_purchase_sale.py,sha256=1L9vWtEmA4nQMR5wzt-IKyjk3VAvN_d9S1nZelwtgFs,22807
-odoo/addons/purchase_sale_inter_company/views/res_config_view.xml,sha256=VstJvSMIJVWRrk3QORwG7N0zIhTapHjCRvrALdXv28A,2276
+odoo/addons/purchase_sale_inter_company/tests/test_inter_company_purchase_sale.py,sha256=_15FPPT-jNV2fYd16H1h7TZkU5m7epGmKFCbRla1Gm0,23685
+odoo/addons/purchase_sale_inter_company/views/res_config_view.xml,sha256=QMIQca0FUTZ2TyimHpo56dAJNhiMJZDORdVCf8mMRa0,2690
 odoo/addons/purchase_sale_inter_company/wizard/__init__.py,sha256=pmvbr35RTC9wT_I03DoQl6qfH4ySk4z3ym2KXa5ovNI,43
 odoo/addons/purchase_sale_inter_company/wizard/stock_backorder_confirmation.py,sha256=LCrPuI9ddoRXhKDBS3r_M5sNpqjBwLTOFInQGocIWbA,1499
 odoo/addons/purchase_sale_inter_company/wizard/stock_backorder_confirmation_views.xml,sha256=MrEadgNdl2zcT4IAAKXUthk_aAZoGlyF9GMF0HZ60MU,1162
-odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/METADATA,sha256=D6KFgf3fvKntmzwVmsJm_vGxm2MhzPAeiKw4QQ3boAs,6127
-odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/WHEEL,sha256=oiQVh_5PnQM0E3gPdiz09WCNmwiHDMaGer_elqB3coM,92
-odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_purchase_sale_inter_company-14.0.2.1.2.dev1.dist-info/RECORD,,
+odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/METADATA,sha256=vTKnPLW74T_DJrRf_L-jYeoEqk5T4pvGJxkVHOLbdWU,6165
+odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_purchase_sale_inter_company-14.0.2.2.0.dist-info/RECORD,,
```

